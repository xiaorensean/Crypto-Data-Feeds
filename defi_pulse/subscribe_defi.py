import traceback
import requests
import time
import datetime
import os
import sys
current_dir = os.path.dirname(os.path.abspath(__file__))
pkg_dir = os.path.dirname(current_dir)
sys.path.append(pkg_dir)
from influxdb_client.influxdb_writer import Writer
from utility.error_logger_writer import logger

# utils
db = Writer()

measurement = "defi_total_value_locked"

def write_data(measurement,data):
    for d in data:
        print(d['name'])
        fields = {}
        fields.update({"total_value_locked_usd":float(d['value']['tvl']['USD']['value'])})
        fields.update({"is_api_return_timestamp": True})
        tags = {}
        if d['name'] == "Robo-Advisor for Yield":
            tags.update({"symbol":d['name'].split(" ")[0].replace("-","")})
        else:
            tags.update({"symbol":d['name'].replace(" ", "")})
        dbtime = datetime.datetime.utcfromtimestamp(d['timestamp'])
        db.write_points_to_measurement(measurement,dbtime,tags,fields)


data_url = "https://public.defipulse.com/api/GetProjects?api-key=bd39116b1200f233cbac773378ac4d3fa349097544725c3ddd2ed4ebf613"

response = requests.get(data_url)
print(response)
data = response.json()
write_data(measurement,data)

#data = [{"name":"Maker","token":"MKR","chain":"Ethereum","category":"Lending","outstanding":{"DAI":{"value":128971217.54317111,"valueUSD":128794871.58339287,"valueETH":538687.822926065},"total":{"valueUSD":128794871.58339287,"valueETH":538687.822926065}},"interest_speed":{"DAI":{"valueUSD":686599.3440844837,"valueETH":2871.719202327507},"total":{"valueUSD":686599.3440844837,"valueETH":2871.719202327507}},"lend_rates":{"DAI":0,"composite":0},"borrow_rates":{"DAI":0.5330952511101502,"composite":0.5330952511101502}},{"name":"dYdX","token":None,"chain":"Ethereum","category":"Lending","outstanding":{"DAI":{"value":7625991.140875089,"valueUSD":7615563.909492646,"valueETH":31852.289554112034},"USDC":{"value":6738435.873400853,"valueUSD":6788922.978316385,"valueETH":28394.84285547863},"WETH":{"value":14412.760084857622,"valueUSD":3445946.808688609,"valueETH":14412.760084857622},"total":{"valueUSD":17850433.69649764,"valueETH":74659.89249444829}},"interest_speed":{"DAI":{"valueUSD":525994.0019246559,"valueETH":2199.9832779482867},"USDC":{"valueUSD":454736.15226641996,"valueETH":1901.9455111732818},"WETH":{"valueUSD":39025.10200665009,"valueETH":163.2234807254594},"total":{"valueUSD":1019755.2561977259,"valueETH":4265.152269847028}},"lend_rates":{"DAI":4.48771248160372,"USDC":4.13351202373494,"WETH":0.12058992142429546,"composite":3.509948469058616},"borrow_rates":{"DAI":6.9068293323494405,"USDC":6.698207561329441,"WETH":1.13249287273536,"composite":5.71277579881887}},{"name":"Compound","token":None,"chain":"Ethereum","category":"Lending","outstanding":{"BAT":{"value":179370.43032320705,"valueUSD":42510.79198660007,"valueETH":177.80246763394564},"DAI":{"value":11015958.999625176,"valueUSD":11000896.570195785,"valueETH":46011.52942488513},"REP":{"value":5164.669906276321,"valueUSD":76798.64150632889,"valueETH":321.2122694647576},"SAI":{"value":2334.371765647302,"valueUSD":2315.6967915221235,"valueETH":9.68546066971485},"USDC":{"value":7225426.216796,"valueUSD":7279562.051627756,"valueETH":30446.95324617406},"USDT":{"value":167613.25334,"valueUSD":167445.64008666,"valueETH":700.3456442622443},"WBTC":{"value":11.15966428,"valueUSD":106373.361933746,"valueETH":444.90928911182397},"WETH":{"value":1651.568508820561,"valueUSD":394873.51477390795,"valueETH":1651.5685088205612},"ZRX":{"value":929960.4319411076,"valueUSD":337575.63679462206,"valueETH":1411.9186782994775},"total":{"valueUSD":19408351.90569693,"valueETH":81175.9249893217}},"interest_speed":{"BAT":{"valueUSD":1166.5939119632303,"valueETH":4.879308678586433},"DAI":{"valueUSD":170292.28310776706,"valueETH":712.251801027927},"REP":{"valueUSD":1942.6504596732777,"valueETH":8.1251849080818},"SAI":{"valueUSD":63.829264127388065,"valueETH":0.2669675190404788},"USDC":{"valueUSD":390067.2856359136,"valueETH":1631.4663333301837},"USDT":{"valueUSD":0,"valueETH":0},"WBTC":{"valueUSD":4336.93619795373,"valueETH":18.13934584446748},"WETH":{"valueUSD":8210.056930532895,"valueETH":34.33877171999203},"ZRX":{"valueUSD":29617.053539693155,"valueETH":123.87407896479633},"total":{"valueUSD":605696.6890476244,"valueETH":2533.3417919930753}},"lend_rates":{"BAT":0.057467265229482756,"DAI":0.9366942744657031,"REP":0.03733600834334716,"SAI":0.49999999983551996,"USDC":1.617251586255808,"USDT":None,"WBTC":0.2397258740565178,"WETH":0.010713543512164136,"ZRX":1.6313288702319184,"composite":1.1677578922037977},"borrow_rates":{"BAT":2.7442300118307728,"DAI":1.547985493919941,"REP":2.5295375303131973,"SAI":2.7563739933945604,"USDC":5.358389459001756,"USDT":None,"WBTC":4.077088586007993,"WETH":2.0791612056416886,"ZRX":8.773457060146761,"composite":3.1208043423297283}},{"name":"Fulcrum","token":None,"chain":"Ethereum","category":"Lending","outstanding":{"DAI":{"value":282290.5489258001,"valueUSD":281904.56514790806,"valueETH":1179.0730065996406},"USDC":{"value":30453.831564,"valueUSD":30682.004068441394,"valueETH":128.32826161044542},"WBTC":{"value":0.02855529,"valueUSD":272.18759651550005,"valueETH":1.1384315383976746},"WETH":{"value":11503.109712430618,"valueUSD":2750278.5011450364,"valueETH":11503.109712430618},"total":{"valueUSD":3063137.2579579013,"valueETH":12811.649412179102}},"interest_speed":{"DAI":{"valueUSD":7775.929642770418,"valueETH":32.52302330825387},"USDC":{"valueUSD":1638.564502238373,"valueETH":6.853337664638308},"WBTC":{"valueUSD":109.4604800742728,"valueETH":0.45782123917467393},"WETH":{"valueUSD":76978.18881624125,"valueETH":321.9632306505552},"total":{"valueUSD":86502.14344132431,"valueETH":361.7974128626221}},"lend_rates":{"DAI":0.07851123073423989,"USDC":1.2628632200802439,"WBTC":0.13693180748773645,"WETH":2.5189100286410295,"composite":2.2815240159053354},"borrow_rates":{"DAI":2.7583553457854038,"USDC":5.3404741704071155,"WBTC":40.21508748949897,"WETH":2.7989234102725438,"composite":2.823972161763088}}]
#data = [{'category': 'Lending', 'permissioning': 'Open', 'variability': 'Medium', 'website': 'https://cdp.makerdao.com/', 'chain': 'Ethereum', 'name': 'Maker', 'value': {'tvl': {'USD': {'value': 486655460, 'relative_1d': -0.81}, 'ETH': {'value': 2036556.1600267827, 'relative_1d': 0.52}, 'BTC': {'value': 51025.955683985485, 'relative_1d': 0.92}}, 'total': {'USD': {'value': 486655460, 'relative_1d': -0.81}, 'ETH': {'value': 1867569.2141055337, 'relative_1d': 0.36}, 'BTC': {'value': 2693.73042113, 'relative_1d': 0.06}}, 'balance': {'ERC20': {'DAI': {'value': 10172797.492286794, 'relative_1d': 4.56}}}}, 'contributesTo': None, 'relative_1d': -0.81, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Synthetix', 'value': {'tvl': {'USD': {'value': 137686753, 'relative_1d': 2.89}, 'ETH': {'value': 576191.6345831938, 'relative_1d': 4.26}, 'BTC': {'value': 14436.4930311269, 'relative_1d': 4.68}}, 'total': {'USD': {'value': 137686753, 'relative_1d': 2.89}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': 2.89, 'timestamp': 1591891200}, {'category': 'Lending', 'permissioning': 'Open', 'variability': 'Medium', 'website': 'https://compound.finance/', 'chain': 'Ethereum', 'name': 'Compound', 'value': {'tvl': {'USD': {'value': 89786775, 'relative_1d': -15.28}, 'ETH': {'value': 375739.7681620355, 'relative_1d': -14.14}, 'BTC': {'value': 9414.167473139983, 'relative_1d': -13.8}}, 'total': {'USD': {'value': 89786775, 'relative_1d': -15.28}, 'ETH': {'value': 247265.3555096505, 'relative_1d': -21.38}, 'BTC': {'value': 156.55668355, 'relative_1d': 3.7}}, 'balance': {'ERC20': {'DAI': {'value': 5615838.466149624, 'relative_1d': 8.81}}}}, 'contributesTo': None, 'relative_1d': -15.28, 'timestamp': 1591891200}, {'category': 'Lending', 'chain': 'Ethereum', 'name': 'Aave', 'value': {'tvl': {'USD': {'value': 84528788, 'relative_1d': -0.08}, 'ETH': {'value': 353736.13993973884, 'relative_1d': 1.26}, 'BTC': {'value': 8862.866124031576, 'relative_1d': 1.66}}, 'total': {'USD': {'value': 84528788, 'relative_1d': -0.08}, 'ETH': {'value': 39364.147685, 'relative_1d': 6.67}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 1566069.17329, 'relative_1d': 4.9}}}}, 'contributesTo': None, 'relative_1d': -0.08, 'timestamp': 1591891200}, {'category': 'Lending', 'chain': 'Ethereum', 'name': 'InstaDApp', 'value': {'tvl': {'USD': {'value': 47079952, 'relative_1d': 0.35}, 'ETH': {'value': 197020.2209574824, 'relative_1d': 1.69}, 'BTC': {'value': 4936.345611649284, 'relative_1d': 2.1}}, 'total': {'USD': {'value': 47079952, 'relative_1d': 0.35}, 'ETH': {'value': 191627.153714, 'relative_1d': 0}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 188246.435098, 'relative_1d': 0}}}}, 'contributesTo': ['Maker', 'Compound'], 'relative_1d': 0.35, 'timestamp': 1591311600}, {'category': 'Assets', 'chain': 'Ethereum', 'name': 'WBTC', 'value': {'tvl': {'USD': {'value': 37806066, 'relative_1d': -1.74}, 'ETH': {'value': 158210.85537328423, 'relative_1d': -0.43}, 'BTC': {'value': 3963.9761738249695, 'relative_1d': -0.03}}, 'total': {'USD': {'value': 37806066, 'relative_1d': -1.74}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': 3966.246832, 'relative_1d': 0}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': -1.74, 'timestamp': 1591891200}, {'category': 'Lending', 'permissioning': 'Open', 'variability': 'Medium', 'website': 'https://dydx.exchange/', 'chain': 'Ethereum', 'name': 'dYdX', 'value': {'tvl': {'USD': {'value': 33803579, 'relative_1d': 0.14}, 'ETH': {'value': 141461.24455975895, 'relative_1d': 1.48}, 'BTC': {'value': 3544.314336911174, 'relative_1d': 1.88}}, 'total': {'USD': {'value': 33803579, 'relative_1d': 0.14}, 'ETH': {'value': 112946.9680341184, 'relative_1d': 12.25}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 3465014.647693216, 'relative_1d': -5.91}}}}, 'contributesTo': None, 'relative_1d': 0.14, 'timestamp': 1591891200}, {'category': 'DEXes', 'permissioning': 'Open', 'website': 'https://uniswap.io/', 'chain': 'Ethereum', 'name': 'Uniswap', 'value': {'tvl': {'USD': {'value': 32165290, 'relative_1d': -1.6}, 'ETH': {'value': 134605.33143622364, 'relative_1d': -0.28}, 'BTC': {'value': 3372.5392952594048, 'relative_1d': 0.12}}, 'total': {'USD': {'value': 32165290, 'relative_1d': -1.6}, 'ETH': {'value': 67266.0718828462, 'relative_1d': -0.39}, 'BTC': {'value': 94.5443891, 'relative_1d': 0.29}}, 'balance': {'ERC20': {'DAI': {'value': 2839406.025744766, 'relative_1d': -0.91}}}}, 'contributesTo': None, 'relative_1d': -1.6, 'timestamp': 1591891200}, {'category': 'DEXes', 'chain': 'Ethereum', 'name': 'Bancor', 'value': {'tvl': {'USD': {'value': 18391108, 'relative_1d': -5.54}, 'ETH': {'value': 76963.12353531971, 'relative_1d': -4.28}, 'BTC': {'value': 1928.3126131727586, 'relative_1d': -3.89}}, 'total': {'USD': {'value': 18391108, 'relative_1d': -5.54}, 'ETH': {'value': 17372.3755365746, 'relative_1d': -4.28}, 'BTC': {'value': 0.00072919, 'relative_1d': 0}}, 'balance': {'ERC20': {'DAI': {'value': 150844.2518228088, 'relative_1d': -5.31}}}}, 'contributesTo': None, 'relative_1d': -5.54, 'timestamp': 1591891200}, {'category': 'Assets', 'chain': 'Ethereum', 'name': 'Set Protocol', 'value': {'tvl': {'USD': {'value': 16887597, 'relative_1d': -0.22}, 'ETH': {'value': 70671.22949447607, 'relative_1d': 1.11}, 'BTC': {'value': 1770.669081018851, 'relative_1d': 1.52}}, 'total': {'USD': {'value': 16887597, 'relative_1d': -0.22}, 'ETH': {'value': 63074.829515, 'relative_1d': 0.49}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 22486.593674, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -0.22, 'timestamp': 1591891200}, {'category': 'DEXes', 'chain': 'Ethereum', 'name': 'Loopring', 'value': {'tvl': {'USD': {'value': 9167110, 'relative_1d': 9}, 'ETH': {'value': 38362.52929360562, 'relative_1d': 10.46}, 'BTC': {'value': 961.1739455470615, 'relative_1d': 10.9}}, 'total': {'USD': {'value': 9167110, 'relative_1d': 9}, 'ETH': {'value': 15937.947443, 'relative_1d': -0.14}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 41142.215872, 'relative_1d': -4.51}}}}, 'contributesTo': None, 'relative_1d': 9, 'timestamp': 1591891200}, {'category': 'Payments', 'chain': 'Bitcoin', 'name': 'Lightning Network', 'value': {'tvl': {'USD': {'value': 9006739, 'relative_1d': -1.42}, 'ETH': {'value': 37691.40860395045, 'relative_1d': -0.1}, 'BTC': {'value': 944.3590031255865, 'relative_1d': 0.3}}, 'total': {'USD': {'value': 9006739, 'relative_1d': -1.42}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': 944.9, 'relative_1d': 0.33}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': -1.42, 'timestamp': 1591891200}, {'category': 'DEXes', 'chain': 'Ethereum', 'name': 'Kyber', 'value': {'tvl': {'USD': {'value': 6717425, 'relative_1d': -3.35}, 'ETH': {'value': 28111.08553732842, 'relative_1d': -2.06}, 'BTC': {'value': 704.3238153754531, 'relative_1d': -1.67}}, 'total': {'USD': {'value': 6717425, 'relative_1d': -3.35}, 'ETH': {'value': 7859.1481467215, 'relative_1d': 1.65}, 'BTC': {'value': 139.27231731, 'relative_1d': 0.4}}, 'balance': {'ERC20': {'DAI': {'value': 531028.0211200556, 'relative_1d': 0.24}}}}, 'contributesTo': None, 'relative_1d': -3.35, 'timestamp': 1591891200}, {'category': 'Lending', 'chain': 'Ethereum', 'name': 'DDEX', 'value': {'tvl': {'USD': {'value': 6481781, 'relative_1d': 0.18}, 'ETH': {'value': 27124.962336792767, 'relative_1d': 1.52}, 'BTC': {'value': 679.6164786876102, 'relative_1d': 1.93}}, 'total': {'USD': {'value': 6481781, 'relative_1d': 0.18}, 'ETH': {'value': 8463.378772, 'relative_1d': 3.84}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 74817.342489, 'relative_1d': 0.25}}}}, 'contributesTo': None, 'relative_1d': 0.18, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Nexus Mutual', 'value': {'tvl': {'USD': {'value': 4004393, 'relative_1d': -1.16}, 'ETH': {'value': 16757.58704385671, 'relative_1d': 0.16}, 'BTC': {'value': 419.86168152569724, 'relative_1d': 0.57}}, 'total': {'USD': {'value': 4004393, 'relative_1d': -1.16}, 'ETH': {'value': 16579.081774, 'relative_1d': 0.05}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 40580.145696, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -1.16, 'timestamp': 1591891200}, {'category': 'Lending', 'permissioning': 'Open', 'variability': 'High', 'website': 'https://www.nuo.network/', 'chain': 'Ethereum', 'name': 'Nuo Network', 'value': {'tvl': {'USD': {'value': 2646614, 'relative_1d': -2.89}, 'ETH': {'value': 11075.552393706059, 'relative_1d': -1.59}, 'BTC': {'value': 277.4981887116104, 'relative_1d': -1.19}}, 'total': {'USD': {'value': 2646614, 'relative_1d': -2.89}, 'ETH': {'value': 2945.4961955234, 'relative_1d': -14.81}, 'BTC': {'value': 26.64955359, 'relative_1d': 0.79}}, 'balance': {'ERC20': {'DAI': {'value': 86245.4707919442, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -2.89, 'timestamp': 1591891200}, {'category': 'Assets', 'chain': 'Ethereum', 'name': 'dForce', 'value': {'tvl': {'USD': {'value': 2507527, 'relative_1d': 0.47}, 'ETH': {'value': 10493.501004352192, 'relative_1d': 1.81}, 'BTC': {'value': 262.9148794064636, 'relative_1d': 2.22}}, 'total': {'USD': {'value': 2507527, 'relative_1d': 0.47}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': 0.47, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Erasure', 'value': {'tvl': {'USD': {'value': 2391760, 'relative_1d': -0.88}, 'ETH': {'value': 10009.03916973552, 'relative_1d': 0.44}, 'BTC': {'value': 250.77667836446165, 'relative_1d': 0.85}}, 'total': {'USD': {'value': 2391760, 'relative_1d': -0.88}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 5437.88101, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -0.88, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Opyn', 'value': {'tvl': {'USD': {'value': 1838821, 'relative_1d': -1.39}, 'ETH': {'value': 7695.099598259123, 'relative_1d': -0.07}, 'BTC': {'value': 192.80087570944312, 'relative_1d': 0.33}}, 'total': {'USD': {'value': 1838821, 'relative_1d': -1.39}, 'ETH': {'value': 1922.456674, 'relative_1d': 0.01}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 1.801998, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -1.39, 'timestamp': 1591891200}, {'category': 'Lending', 'chain': 'Ethereum', 'name': 'Robo-Advisor for Yield', 'shortName': 'RAY', 'value': {'tvl': {'USD': {'value': 1808909, 'relative_1d': -0.33}, 'ETH': {'value': 7569.923836625377, 'relative_1d': 1}, 'BTC': {'value': 189.66459447585876, 'relative_1d': 1.41}}, 'total': {'USD': {'value': 1808909, 'relative_1d': -0.33}, 'ETH': {'value': 2220.540477, 'relative_1d': 0}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 745455.984619, 'relative_1d': 0.05}}}}, 'contributesTo': None, 'relative_1d': -0.33, 'timestamp': 1591891200}, {'category': 'Lending', 'permissioning': 'Open', 'website': 'https://bzx.network/', 'chain': 'Ethereum', 'name': 'bZx', 'value': {'tvl': {'USD': {'value': 1571376, 'relative_1d': -3.24}, 'ETH': {'value': 6575.895547371945, 'relative_1d': -1.95}, 'BTC': {'value': 164.7591956306796, 'relative_1d': -1.55}}, 'total': {'USD': {'value': 1571376, 'relative_1d': -3.24}, 'ETH': {'value': 4242.7444820987, 'relative_1d': -0.02}, 'BTC': {'value': 7.00090901, 'relative_1d': -31.37}}, 'balance': {'ERC20': {'DAI': {'value': 122696.8470129331, 'relative_1d': 0.56}}}}, 'contributesTo': None, 'relative_1d': -3.24, 'timestamp': 1591891200}, {'category': 'Lending', 'chain': 'Ethereum', 'name': 'Dharma', 'value': {'tvl': {'USD': {'value': 1282156, 'relative_1d': 0.19}, 'ETH': {'value': 5365.567458988952, 'relative_1d': 1.53}, 'BTC': {'value': 134.43440095371804, 'relative_1d': 1.94}}, 'total': {'USD': {'value': 1282156, 'relative_1d': 0.19}, 'ETH': {'value': 348.542841, 'relative_1d': 0}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 996422.834823, 'relative_1d': 0.64}}}}, 'contributesTo': ['Compound'], 'relative_1d': 0.19, 'timestamp': 1591891200}, {'category': 'Assets', 'chain': 'Ethereum', 'name': 'Melon', 'value': {'tvl': {'USD': {'value': 805369, 'relative_1d': 1.48}, 'ETH': {'value': 3370.308838299297, 'relative_1d': 2.84}, 'BTC': {'value': 84.44315595114396, 'relative_1d': 3.25}}, 'total': {'USD': {'value': 805369, 'relative_1d': 1.48}, 'ETH': {'value': 1712.160754, 'relative_1d': 8.27}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 8701.635592, 'relative_1d': 57.67}}}}, 'contributesTo': None, 'relative_1d': 1.48, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Augur', 'value': {'tvl': {'USD': {'value': 384421, 'relative_1d': -1.21}, 'ETH': {'value': 1608.7253096752595, 'relative_1d': 0.11}, 'BTC': {'value': 40.30664509547141, 'relative_1d': 0.51}}, 'total': {'USD': {'value': 384421, 'relative_1d': -1.21}, 'ETH': {'value': 1607.8522537086, 'relative_1d': 0}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': -1.21, 'timestamp': 1591891200}, {'category': 'Payments', 'chain': 'Ethereum', 'name': 'xDai', 'value': {'tvl': {'USD': {'value': 45348, 'relative_1d': -0.33}, 'ETH': {'value': 189.77234683629058, 'relative_1d': 1.01}, 'BTC': {'value': 4.754749979292072, 'relative_1d': 1.41}}, 'total': {'USD': {'value': 45348, 'relative_1d': -0.33}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 45410.4844151178, 'relative_1d': 0.09}}}}, 'contributesTo': None, 'relative_1d': -0.33, 'timestamp': 1591891200}, {'category': 'Derivatives', 'chain': 'Ethereum', 'name': 'Veil', 'value': {'tvl': {'USD': {'value': 30951, 'relative_1d': -1.22}, 'ETH': {'value': 129.52376966856377, 'relative_1d': 0.11}, 'BTC': {'value': 3.2452206626327276, 'relative_1d': 0.51}}, 'total': {'USD': {'value': 30951, 'relative_1d': -1.22}, 'ETH': {'value': 129.4552660327, 'relative_1d': 0}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': None, 'relative_1d': None}}}}, 'contributesTo': None, 'relative_1d': -1.22, 'timestamp': 1591891200}, {'category': 'Payments', 'chain': 'Ethereum', 'name': 'Connext', 'value': {'tvl': {'USD': {'value': 12419, 'relative_1d': -0.42}, 'ETH': {'value': 51.971041178439904, 'relative_1d': 0.92}, 'BTC': {'value': 1.302135485420046, 'relative_1d': 1.32}}, 'total': {'USD': {'value': 12419, 'relative_1d': -0.42}, 'ETH': {'value': None, 'relative_1d': None}, 'BTC': {'value': None, 'relative_1d': None}}, 'balance': {'ERC20': {'DAI': {'value': 12435.8756428626, 'relative_1d': 0}}}}, 'contributesTo': None, 'relative_1d': -0.42, 'timestamp': 1591891200}]


